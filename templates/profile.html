<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ñ–∏–ª—å</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üîÆ –ö–ª—É–± –í–µ–¥—å–º "–ü–æ –ú—ë—Ç–ª–∞–º"</h1>
            <p class="subtitle">–ó–∞–∫—Ä—ã—Ç–æ–µ –∂–µ–Ω—Å–∫–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ</p>
        </header>

        <nav class="navigation">
            <a href="/survey" class="nav-btn">üìù –ê–Ω–∫–µ—Ç–∞</a>
            <a href="/" class="nav-btn">üë• –£—á–∞—Å—Ç–Ω–∏—Ü—ã</a>
            <a href="/profile" class="nav-btn active">‚öôÔ∏è –ü—Ä–æ—Ñ–∏–ª—å</a>
        </nav>

        <section class="profile-section">
            <h2>‚öôÔ∏è –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
            <div class="profile-card">
                <div class="profile-info" id="profileInfo">
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è...</p>
                </div>
                <button class="btn-logout" onclick="logout()">üö™ –í—ã—Ö–æ–¥</button>
            </div>
        </section>
    </div>

    <script>
        const tg = window.Telegram?.WebApp;
        if (tg) {
            tg.ready();
            tg.expand();
        }

        async function loadProfile() {
            try {
                const response = await fetch('/get_profile');
                const data = await response.json();
                
                if (data.success) {
                    const profile = data.profile;
                    document.getElementById('profileInfo').innerHTML = `
                        <p><strong>–ò–º—è:</strong> ${profile.name}</p>
                        <p><strong>–í–æ–∑—Ä–∞—Å—Ç:</strong> ${profile.age}</p>
                        <p><strong>–û–ø—ã—Ç:</strong> ${profile.experience} –ª–µ—Ç</p>
                        <p><strong>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:</strong> ${profile.specialty}</p>
                        <p><strong>–û —Å–µ–±–µ:</strong> ${profile.about}</p>
                    `;
                } else {
                    document.getElementById('profileInfo').innerHTML = '<p>‚ùå –ü—Ä–æ—Ñ–∏–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω</p>';
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                document.getElementById('profileInfo').innerHTML = '<p>‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>';
            }
        }

        function logout() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã?')) {
                window.location.href = '/logout';
            }
        }

        loadProfile();
    </script>
</body>
</html>
